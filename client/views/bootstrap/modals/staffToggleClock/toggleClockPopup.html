<!-- originally made for shift_scheduler project-->
<template name="toggleClockPopup">
    <div class="modal" id="toggle-clock">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title">{{title}}</h4>

                    <div class="alerts-container"></div>
                </div>

                <div class="modal-body ">
                    <form class="input-pin {{visibleIf pinNotEntered}}">
                        <div class="form-group">
                            {{> pinInputWithPinpad id='pnp'}}
                        </div>
                    </form>


                    <form class="toggle-clock-form" id="toggle-clock-form">
						{{#if pinNotEntered}}
						{{else}}
							{{#if showBye}}
                                <div class="form-group">
                                    <p>You have closed 2 shifts today. </p>
                                </div>
							{{/if}}

							{{#if showWhy2}}
                                <div class="form-group">
                                    <p>You have closed 1 shift today. Why are you there?</p>
                                    <input type="radio" name="reason-there" value="mistake" required>Just clicked
                                    there<br>
                                    <input type="radio" name="reason-there" value="manager">Was called in by manager on
                                    2nd
                                    shift<br>
									{{#if manager}}
                                        <div class="form-group row">
                                            <div class="col-sm-6">
                                                <label>Manager name</label>
                                                <input type="text" class="form-control" name="manager" required>
                                                <label>Role</label>
                                                <select class="form-control" name="role" required>
                                                    <option value="">select role</option>
													{{#each occupationsList}}
                                                        <option value="{{_id}}"
                                                            {{selectedIfMatches ../shift.splitRole _id}}>{{name}} - {{code}}</option>
													{{/each}}
                                                </select>
                                            </div>
                                        </div>
									{{/if}}
									{{#if showConfirm}}

                                        <a href="#" class="btn btn-success clock-on-confirm" data-shift="split">Clock
                                            on</a>
									{{/if}}
                                </div>
							{{/if}}

							{{#if showWhy1}}
                                <div class="form-group">
                                    <p>Why are you there?</p>
                                    <input type="radio" name="reason-there" value="mistake" required>Just thought I
                                    would
                                    work today<br>
                                    <input type="radio" name="reason-there" value="manager">Was called in by manager<br>
									{{#if manager}}
                                        <div class="form-group row">
                                            <div class="col-sm-6">
                                                <label>Manager name</label>
                                                <input type="text" class="form-control" name="manager" required>
                                                <label>Role</label>
                                                <select class="form-control" name="role" required>
                                                    <option value="">select role</option>
													{{#each occupationsList}}
                                                        <option value="{{_id}}"
                                                            {{selectedIfMatches ../shift.shiftRole _id}}>{{name}} - {{code}}</option>
													{{/each}}
                                                </select>
                                            </div>
                                        </div>
										{{#if showConfirm}}
                                            <a href="#" class="btn btn-success clock-on-confirm" data-shift="shift">Clock
                                                on</a>
										{{/if}}
										{{#if showButtonOn}}
											{{> btnShiftClockOn}}
										{{/if}}
									{{/if}}
                                </div>
							{{/if}}


							{{#if hasShift}}
                                <div class="form-group">
									{{#if showShiftOn}}
										{{> btnShiftClockOn split='shift'}}
									{{else}}
										{{#if showShiftOff}}
											{{> btnShiftClockOff split='shift'}}
										{{/if}}
									{{/if}}

									{{#if showSplitOn}}
										{{> btnShiftClockOn split='split'}}
									{{else}}
										{{#if showSplitOff}}
											{{> btnShiftClockOff split='split'}}
										{{/if}}
									{{/if}}
                                </div>
							{{/if}}
						{{/if}} {{! pinNotEntered}}
                    </form>

                </div>
                <div class="modal-footer">
                    <a href="#" data-dismiss="modal" class="btn cancel">Cancel</a>
                </div>
            </div>
        </div>
    </div>
</template>

<template name="btnShiftClockOn">
	{{#if showButton}}
        <a href="#" class="btn btn-success clock-on" data-shift="{{split}}">Clock on</a>
	{{/if}}
	{{#if late}}
        <div>
            <p class="">Why are you late</p>

            <input type="radio" name="reason-late" value="late" required>Just running late<br>
            <input type="radio" name="reason-late" value="ok">Forgot to clock on, was here on time<br>
            <input type="radio" name="reason-late" value="timer">Forgot to clock on, was here at ...<br>
        </div>

		{{#if showTimepicker}}
            <div class="form-group row">
                <div class="col-sm-6">
					{{> timepicker_15 name="timepicker" required="required" id="tp789"}}
                </div>
            </div>
		{{/if}}

		{{#if showConfirm}}

            <div class="form-group">
                <a href="#" class="btn btn-success clock-on-confirm" data-shift="{{split}}">Clock on</a>
            </div>
		{{/if}}
	{{/if}}
</template>

<template name="btnShiftClockOff">
	{{#if showButton}}
        <a href="#" class="btn btn-primary clock-off" data-shift="{{split}}">Clock off</a>
	{{/if}}

	{{#if early}}
        <div>
            <p>Why are you leaving early?</p>
            <input type="radio" name="reason-early" value="ok" required>Finished / Nothing for me to do<br>
            <input type="radio" name="reason-early" value="sick">Going home early – Sick<br>
        </div>
	{{/if}}

	{{#if late}}

        <div>
            <p>Why are you here so late?</p>
            <input type="radio" name="reason-late" value="ok" required>I love my work<br>
            <input type="radio" name="reason-late" value="manager">I was asked to stay back<br>
        </div>

		{{#if manager}} <!-- todo template this part-->
            <div class="form-group row">
                <div class="col-sm-6">
                    <input type="text" name="manager" placeholder="manager name" required>
                    <select class="form-control" name="role" required>
                        <option value="">select role</option>
						{{#each occupationsList}}
                            <option value="{{_id}}">{{name}} - {{code}}</option>
						{{/each}}
                    </select>
                </div>
            </div>
		{{/if}}
	{{/if}}

	{{#if showConfirm}}
        <div class="form-group">
            <a href="#" class="btn btn-primary clock-off-confirm" data-shift="{{split}}">Clock off</a>
        </div>
	{{/if}}
</template>
